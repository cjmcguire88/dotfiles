import { html } from '../../../../../../hybrids/src/template/index.js';
import { msg } from '../../../../../../hybrids/src/localize.js';
import { dispatch } from '../../../../../../hybrids/src/utils.js';

/**
 * Ghostery Browser Extension
 * https://www.ghostery.com/
 *
 * Copyright 2017-present Ghostery GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0
 */


function toggle(host) {
  host.value = !host.value;
  dispatch(host, 'change');
}

function stopForAnchors(host, event) {
  let target = event.target;
  while (target && target.tagName !== 'A') {
    target = target.parentElement;
  }
  if (target) {
    event.stopPropagation();
  }
}

const __vite_glob_0_5 = {
  value: { value: false, reflect: true },
  disabled: { value: false, reflect: true },
  noLabel: { value: false, reflect: true },
  type: { value: '', reflect: true },
  color: '',
  render: {
    value: ({ disabled, value, color }) => html`
      <template layout="contents">
        <button
          onclick="${toggle}"
          layout="row items:start gap:2 padding:1 margin:-1"
          tabindex="${disabled ? -1 : 0}"
        >
          <div layout="grow" onclick="${stopForAnchors}"><slot></slot></div>
          <div id="button" layout="row items:center gap padding:0.5 margin:0">
            <div id="toggle" layout="block relative size:36px:20px">
              <span layout="block size:2 absolute top left margin:2px"></span>
            </div>
            <ui-text type="label-m" layout="width::36px">
              ${value ? msg`On` : msg`Off`}
            </ui-text>
          </div>
        </button>
      </template>
    `.css`
      :host([disabled]) {
        pointer-events: none;
      }


      button {
        cursor: pointer;
        background: none;
        appearance: none;
        border: none;
        -webkit-tap-highlight-color: transparent;
        margin: 0;
        padding: 0;
        text-align: left;
      }

      ui-text {
        text-transform: uppercase;
        transition: color 0.2s;
      }

      #button {
        --ui-text-color-heading: var(--ui-color-danger-500);
      }

      :host([disabled]) #button {
        --ui-text-color-heading: var(--ui-color-gray-400) !important;
      }

      #toggle {
        background: var(--ui-color-danger-500);
        border-radius: 12px;
        transition: color 0.2s, background 0.2s;
      }

      #toggle span {
        background: var(--ui-color-white);
        border-radius: 8px;
        transition: left 0.2s;
      }

      :host([disabled]) #toggle {
        background: var(--ui-color-gray-400) !important;
      }

      :host([value]) #toggle {
        background: var(--ui-color-success-500);
      }

      :host([value]) #button {
        --ui-text-color-heading: var(--ui-color-success-500);
      }

      :host([value]) #toggle span {
        left: calc(100% - 20px);
      }

      :host([no-label]) ui-text {
        display: none;
      }

      :host([type="status"]) #toggle {
        background: var(--ui-color-gray-400);
      }

      :host([value][type="status"]) #toggle {
        background: var(--ui-color-${color});
      }

      :host([type="status"]) #button {
        --ui-text-color-heading: var(--ui-color-gray-400);
      }

      :host([value][type="status"]) #button {
        --ui-text-color-heading: var(--ui-color-${color});
      }


      @media (hover: hover) and (pointer: fine) {
        button:hover #button {
          --ui-text-color-heading: var(--ui-color-danger-700);
        }

        button:hover #toggle {
          background: var(--ui-color-danger-700);
        }

        :host([value]) button:hover #button {
          --ui-text-color-heading: var(--ui-color-success-700);
        }

        :host([value]) button:hover #toggle {
          background: var(--ui-color-success-700);
        }

        :host([type="status"]) button:hover #toggle {
          background: var(--ui-color-gray-600);
        }

        :host([value][type="status"]) button:hover #toggle {
          background: var(--ui-color-${color});
        }

        :host([type="status"]) button:hover #button {
          --ui-text-color-heading: var(--ui-color-gray-600);
        }

        :host([value][type="status"]) button:hover #button {
          --ui-text-color-heading: var(--ui-color-${color});
        }
      }
    `,
    shadow: { delegateFocus: true },
  },
};

export { __vite_glob_0_5 as default };
